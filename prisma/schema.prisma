generator client {
  provider = "prisma-client-js"
  // previewFeatures = ["prismaSchemaFolder"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model user {
  id                        Int               @id @default(autoincrement())
  username                  String            @db.VarChar(255)
  email                     String            @unique @db.VarChar(255)
  password                  String            @db.VarChar(255)
  passwordChangeAt          DateTime?         @db.DateTime(0)
  passwordResetToken        String?           @db.VarChar(255)
  passwordResetTokenExpires DateTime?         @db.DateTime(0)
  roles                     user_roles_role[]
}

model role {
  id    Int               @id @unique @default(autoincrement())
  name  String            @db.VarChar(255)
  users user_roles_role[]
}

model user_roles_role {
  userId Int  @unique
  roleId Int
  user   user @relation(fields: [userId], references: [id], onDelete: Cascade)
  role   role @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@id([userId, roleId])
}

model user_token {
  userId Int    @id @unique @default(autoincrement())
  token  String @db.VarChar(255)
}

model job_position {
  id        Int     @id @default(autoincrement())
  company   String
  logo      String
  new       Boolean
  featured  Boolean
  position  String
  role      String
  level     String
  postedAt  String
  contract  String
  location  String
  languages Json
  tools     Json

  @@index([position, role, level])
}

enum RoleEnum {
  ADMIN
  USER
}
